<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>NBA Draft Predictor</title>
  <link rel="stylesheet" href="/static/style.css">
</head>
<body>
  <h1>NBA Draft Prospect Predictor</h1>
  <form action="/" method="get">
    <label for="year">Draft Year:</label>
    <select name="year" id="year">
      <option value="">All</option>
      {% for y in years %}
      <option value="{{ y }}" {% if request.args.get('year') == y|string %}selected{% endif %}>{{ y }}</option>
      {% endfor %}
    </select>

    <label for="position">Position:</label>
    <select name="position" id="position">
      <option value="">All</option>
      {% for p in positions %}
      <option value="{{ p }}" {% if request.args.get('position') == p %}selected{% endif %}>{{ p }}</option>
      {% endfor %}
    </select>

    <button type="submit">Filter</button>
  </form>

  {% if players %}
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Draft Year</th>
        <th>Position</th>
        <th>Predicted Score</th>
        <th>Actual Tier</th>
      </tr>
    </thead>
    <tbody>
      {% for player in players %}
      <tr>
        <td>{{ player['Name'] }}</td>
        <td>{{ player['Draft Year'] }}</td>
        <td>{{ player['Position Group'] }}</td>
        <td>{{ '%.2f'|format(player['Predicted Score']) }}</td>
        <td>
          {% if player['Actual Tier'] is not none %}
            {{ '%.2f'|format(player['Actual Tier']) }}
          {% else %}
            N/A
          {% endif %}
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
  {% else %}
  <p>No results found.</p>
  {% endif %}
</body>
</html>